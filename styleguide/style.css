/* Import Design Tokens from component library */
@import '../src/styles/design-tokens.css';

/* Styleguide-specific overrides */
:root {
  --crt-scanline-opacity: 0; /* Neutralize scanline darkness */
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  scrollbar-gutter: stable;
}

body {
  background-color: var(--crt-bg-dark);
  color: var(--crt-text-primary);
  font-family: var(--crt-font-family);
  font-size: var(--crt-font-size-base);
  line-height: var(--crt-line-height);
  /* CRT Default Cursor - blinking block */
  cursor: var(--crt-cursor-default);
  overflow-y: scroll;
}

/* CRT Pointer Cursor - small square for clickable elements */
button, .btn, a, [role="button"], [tabindex]:not([tabindex="-1"]),
crt-button, crt-link, crt-tabs, crt-file-upload, crt-date-picker {
  cursor: var(--crt-cursor-pointer);
}

/* CRT Text Cursor - I-beam for text inputs */
input, textarea, select,
crt-input input, crt-textarea textarea, crt-input, crt-textarea {
  cursor: var(--crt-cursor-text);
}

/* Ensure placeholders are green and legible across native inputs and custom input atoms */
input::placeholder, textarea::placeholder,
crt-input input::placeholder, crt-textarea textarea::placeholder,
crt-search .input::placeholder {
  color: var(--crt-text-primary);
  opacity: 1;
}

/* CRT visual overlays (scanlines, vignette, noise) have been moved into the
   `crt-screen` component to avoid global styles leaking from the styleguide.
   Keep a few CSS variables here for backwards compatibility and to allow
   component configuration via CSS variables if needed. */

:root {
  --crt-scan-width: 1px;
  --crt-scan-color: color-mix(in srgb, var(--crt-primary) calc(var(--crt-scanline-opacity, 0.04) * 100%), transparent);
}

/* Phosphor glow / text bleeding effect moved to `crt-screen` component; keep
   a very subtle fallback here for headings but prefer the component. */
.sg-wrapper {
  text-shadow: 0 0 0.45px var(--crt-primary), 0 0 0.9px color-mix(in srgb, var(--crt-primary) 20%, transparent);
}

/* Style Guide Specific */
.sg-wrapper {
  position: relative;
  min-height: 100vh;
  background-color: var(--crt-bg-dark);
}

/* Reduce heading glow for better legibility */
h1, h2, h3, h4, .sg-header crt-heading {
  text-shadow: 0 0 0.4px var(--crt-primary), 0 0 0.8px color-mix(in srgb, var(--crt-primary) 20%, transparent);
}

/* Legacy demo switch (#switch) compatibility
   Supports the original markup where a checkbox `#switch` toggles
   the scanline animation on the sibling `.screen.scanlines`. */
#switch { display: none; }

/* Ensure scanlines container clips children so moving line passes cleanly */
.screen.scanlines { overflow: hidden; position: relative; }

#switch ~ .screen.scanlines::before {
  content: "";
  position: absolute;
  left: 0;
  top: -20%;
  width: 100%;
  height: 12px; /* visible band */
  z-index: 99999;
  background: linear-gradient(180deg, transparent 0%, var(--crt-primary) 50%, transparent 100%);
  opacity: 0; /* shown when active */
  pointer-events: none;
  transform: translateY(-120%);
  mix-blend-mode: screen;
  filter: blur(0.6px);
}

#switch ~ .screen.scanlines::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 99998;
  background: linear-gradient(to bottom, transparent 50%, color-mix(in srgb, var(--crt-primary) 4%, transparent) 51%);
  background-size: 100% 4px;
  opacity: 0.6;
  pointer-events: none;
}

/* Disable scanline effects */
:root {
  --crt-scanline-opacity: 0; /* Neutralize scanline darkness */
}

/* Remove scanline animations */
.screen.scanlines::before,
.screen.scanlines::after {
  animation: none !important;
  opacity: 0 !important;
}

#switch:checked ~ .screen.scanlines {
  animation: none !important;
  background-image: none !important;
}

/* Robust moving highlight using a background gradient so it appears reliably
   regardless of clip-path/pseudo-element behavior. This ensures a visible
   band passes over the .screen when #switch is checked. */
#switch:checked ~ .screen.scanlines {
  background-image: linear-gradient(180deg, transparent 0%, var(--crt-primary) 50%, transparent 100%);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 100% 12px; /* thickness of the moving band */
  animation: scan-moving-bg 2.6s linear infinite;
  mix-blend-mode: screen;
}

@keyframes scan-moving-bg {
  from { background-position: 0 100%; }
  to   { background-position: 0 -100%; }
}

.sg-corner {
  position: fixed;
  width: 30px;
  height: 30px;
  border: 2px solid var(--crt-primary);
  z-index: 10;
  box-shadow: var(--crt-glow-sm);
}

.sg-corner-tl {
  top: 20px;
  left: 20px;
  border-right: none;
  border-bottom: none;
}

.sg-corner-tr {
  top: 20px;
  right: 20px;
  border-left: none;
  border-bottom: none;
}

.sg-corner-bl {
  bottom: 20px;
  left: 20px;
  border-right: none;
  border-top: none;
}

.sg-corner-br {
  bottom: 20px;
  right: 20px;
  border-left: none;
  border-top: none;
}

.sg-screen-glow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: none !important;
  pointer-events: none;
  z-index: 1;
}

.sg-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--crt-spacing-xl) var(--crt-spacing-lg);
  position: relative;
  z-index: 2;
}

.sg-layout {
  display: grid;
  grid-template-columns: 260px minmax(0, 1fr);
  gap: var(--crt-spacing-xl);
  align-items: start;
}

.sg-sidebar {
  border: 2px solid var(--crt-primary);
  padding: var(--crt-spacing-md);
  background: transparent;
}

.sg-sidebar-inner {
  display: flex;
  flex-direction: column;
  gap: var(--crt-spacing-md);
}

.sg-sidebar-title {
  font-size: var(--crt-font-size-sm);
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--crt-text-muted);
}

.sg-sidebar-nav,
.sg-sidebar-group-links {
  display: flex;
  flex-direction: column;
  gap: var(--crt-spacing-xs);
}

.sg-sidebar-nav a,
.sg-sidebar-group-links a {
  color: var(--crt-text-primary);
  text-decoration: none;
  padding: 2px 0;
  font-size: var(--crt-font-size-sm);
}

.sg-sidebar-group-title {
  font-size: var(--crt-font-size-xs);
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--crt-text-muted);
  margin-top: var(--crt-spacing-sm);
}

.sg-content {
  min-width: 0;
}

.sg-header {
  text-align: center;
  margin-bottom: var(--crt-spacing-2xl);
  padding: var(--crt-spacing-xl);
  /* Double border effect */
  border: 3px double var(--crt-primary);
  background: linear-gradient(135deg, 
    color-mix(in srgb, var(--crt-primary) 5%, transparent), 
    color-mix(in srgb, var(--crt-primary) 2%, transparent));
  box-shadow: 
    var(--crt-glow-inset),
    0 0 20px color-mix(in srgb, var(--crt-primary) 20%, transparent);
}

.sg-header crt-heading {
  margin: 0;
  line-height: 1.1;
}

.sg-header crt-text {
  font-size: var(--crt-font-size-lg);
  letter-spacing: 3px;
}

.sg-nav {
  background-color: transparent;
  border-bottom: 2px solid var(--crt-primary);
  padding: var(--crt-spacing-lg) 0;
  position: sticky;
  top: 0;
  z-index: 100;
  margin-bottom: var(--crt-spacing-2xl);
  box-shadow: var(--crt-glow-sm);
}

.sg-nav-list {
  list-style: none;
  display: flex;
  gap: var(--crt-spacing-xl);
  flex-wrap: wrap;
}

.sg-nav-list a {
  color: var(--crt-text-primary);
  text-decoration: none;
  font-size: var(--crt-font-size-lg);
  letter-spacing: 2px;
  text-transform: uppercase;
  transition: var(--crt-transition);
  padding: var(--crt-spacing-sm) var(--crt-spacing-md);
  border: 1px solid transparent;
}

.sg-nav-list a:hover {
  border-bottom: 2px solid var(--crt-primary);
  box-shadow: var(--crt-glow);
}

.sg-section {
  margin-bottom: var(--crt-spacing-2xl);
}

.sg-section-header {
  display: flex;
  flex-direction: column;
  gap: var(--crt-spacing-xs);
  margin-bottom: var(--crt-spacing-lg);
}

.sg-component {
  border-top: 1px solid color-mix(in srgb, var(--crt-primary) 30%, transparent);
  padding-top: var(--crt-spacing-lg);
  margin-top: var(--crt-spacing-lg);
}

.sg-component-header {
  display: flex;
  align-items: baseline;
  gap: var(--crt-spacing-sm);
  flex-wrap: wrap;
}

.sg-component-tag {
  font-size: var(--crt-font-size-xs);
}

.sg-component-desc {
  margin: var(--crt-spacing-xs) 0 var(--crt-spacing-md);
}

.sg-meta {
  display: grid;
  gap: var(--crt-spacing-md);
  margin-top: var(--crt-spacing-md);
}

.sg-meta-block {
  border: 1px dashed var(--crt-primary);
  padding: var(--crt-spacing-md);
}

.sg-meta-title {
  font-size: var(--crt-font-size-xs);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: var(--crt-spacing-sm);
  color: var(--crt-text-muted);
}

.sg-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--crt-font-size-xs);
}

.sg-table th,
.sg-table td {
  text-align: left;
  padding: 6px 8px;
  border-bottom: 1px solid color-mix(in srgb, var(--crt-primary) 20%, transparent);
}

.sg-table th {
  color: var(--crt-text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.sg-section crt-heading:first-child {
  margin-top: 0;
}

.sg-demo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--crt-spacing-lg);
  margin: var(--crt-spacing-lg) 0;
}

.sg-demo-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--crt-spacing-lg);
  border: 1px dashed var(--crt-primary);
  background: transparent; /* remove CRT green tint in preview boxes */
  transition: var(--crt-transition);
}

.sg-demo-item:hover {
  background: rgba(255, 255, 255, 0.02); /* subtle neutral hover */
  box-shadow: none; /* disable CRT glow for previews */
}

.sg-footer {
  text-align: center;
  padding: 0; /* removed outer padding to keep footer tight */
  margin-top: var(--crt-spacing-lg);
  /* Remove extra frame â€” footer component already provides visual separation */
  border-top: none;
  box-shadow: none;
  background: transparent;
}

pre {
  background-color: var(--crt-bg-light);
  border: 1px dashed var(--crt-primary);
  padding: var(--crt-spacing-lg);
  overflow-x: auto;
  margin: var(--crt-spacing-md) 0;
  box-shadow: var(--crt-glow-inset);
}

code {
  font-family: var(--crt-font-family);
  font-size: 0.9rem;
  color: var(--crt-text-primary);
}

/* Demo Area Styles */
.sg-button-demo,
.sg-badge-demo,
.sg-typography-demo,
.sg-card-demo,
.sg-button-group-demo {
  padding: var(--crt-spacing-lg) 0;
}

/* Scrollbar visual consistency with components (WebKit + Firefox) */
/* Targets main styleguide scroll containers and overall page */
.sg-container, .sg-content, pre, .table-wrapper, .file-list, .select-dropdown {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--crt-primary) var(--crt-bg-dark);
}

/* WebKit scrollbar for page and specific containers */
.sg-container::-webkit-scrollbar, .sg-content::-webkit-scrollbar, pre::-webkit-scrollbar, .table-wrapper::-webkit-scrollbar, .file-list::-webkit-scrollbar, .select-dropdown::-webkit-scrollbar {
  width: 12px;
}

.sg-container::-webkit-scrollbar-track, .sg-content::-webkit-scrollbar-track, pre::-webkit-scrollbar-track, .table-wrapper::-webkit-scrollbar-track, .file-list::-webkit-scrollbar-track, .select-dropdown::-webkit-scrollbar-track {
  background: var(--crt-bg-dark);
  border: 1px solid var(--crt-primary);
}

.sg-container::-webkit-scrollbar-thumb, .sg-content::-webkit-scrollbar-thumb, pre::-webkit-scrollbar-thumb, .table-wrapper::-webkit-scrollbar-thumb, .file-list::-webkit-scrollbar-thumb, .select-dropdown::-webkit-scrollbar-thumb {
  background: var(--crt-primary);
  border: 1px solid var(--crt-bg-dark);
  box-shadow: var(--crt-glow);
}

.sg-container::-webkit-scrollbar-thumb:hover, .sg-content::-webkit-scrollbar-thumb:hover, pre::-webkit-scrollbar-thumb:hover, .table-wrapper::-webkit-scrollbar-thumb:hover, .file-list::-webkit-scrollbar-thumb:hover, .select-dropdown::-webkit-scrollbar-thumb:hover {
  background: var(--crt-primary-light);
  box-shadow: var(--crt-glow-lg);
}

.sg-demo-row {
  display: flex;
  gap: var(--crt-spacing-lg);
  margin-bottom: var(--crt-spacing-lg);
  flex-wrap: wrap;
  justify-content: center;
}

.sg-demo-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--crt-spacing-lg);
  border: 1px dashed var(--crt-primary);
  background: transparent; /* neutral preview background */
  transition: var(--crt-transition);
  min-width: 150px;
}

.sg-demo-item:hover {
  background: rgba(255, 255, 255, 0.02);
  box-shadow: none;
}

.sg-demo-label {
  font-size: 0.9rem;
  margin-top: var(--crt-spacing-md) !important;
}

.sg-badge-demo {
  display: flex;
  gap: var(--crt-spacing-md);
  flex-wrap: wrap;
  padding: var(--crt-spacing-lg) 0;
}

.sg-card-demo {
  min-height: 150px;
}

.sg-demo-area {
  display: flex;
  flex-direction: column;
  gap: var(--crt-spacing-lg);
  padding: var(--crt-spacing-md);
}

.sg-button-group-demo {
  min-height: 80px;
}

/* Prevent flex/grid children from forcing horizontal overflow
   by allowing them to shrink below their content width. This
   addresses cases where embedded components (e.g. terminals)
   force their parent out of the viewport on small screens. */
.sg-container,
.sg-content,
.sg-section,
.sg-demo-row,
.sg-demo-item,
crt-code-example,
.tabs-wrapper,
.preview-pane {
  min-width: 0;
  box-sizing: border-box;
}


.sg-footer-text {
  font-size: 0.9rem !important;
}

.sg-card-mt {
  margin-top: var(--crt-spacing-xl);
}

/* Responsive */
@media (max-width: 768px) {
  .sg-container {
    padding: var(--crt-spacing-lg) var(--crt-spacing-md);
  }

  .sg-layout {
    grid-template-columns: 1fr;
  }

  .sg-sidebar {
    position: static;
  }

  .sg-nav-list {
    gap: var(--crt-spacing-md);
  }

  .sg-nav-list a {
    font-size: var(--crt-font-size-base);
  }

  .sg-demo-grid {
    grid-template-columns: 1fr;
  }

  .sg-header {
    padding: var(--crt-spacing-lg);
  }
}
